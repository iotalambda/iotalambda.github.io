<!DOCTYPE html><html lang="en" class="__variable_eb9fb7 __variable_2fad4c"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="font" href="/_next/static/media/583a894d7b920fb7-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="preload" as="font" href="/_next/static/media/e807dee2426166ad-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/628175db981e71d1.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/301e7291452e98cd.css" data-precedence="next"/><link rel="preload" href="/_next/static/chunks/webpack-cf90cbaabf0d0d8b.js" as="script" fetchPriority="low"/><script src="/_next/static/chunks/fd9d1056-a99b58d3cc150217.js" async=""></script><script src="/_next/static/chunks/596-9d43875837bd0b65.js" async=""></script><script src="/_next/static/chunks/main-app-b7e55d1c5d28dfd6.js" async=""></script><title>Deep dive to Azure Functions with Go | Food for AI blog</title><meta name="description" content="Blog about .NET, Azure, React and whatever comes to mind."/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="bg-slate-200 dark:bg-slate-700"><nav class="w-full flex flex-row justify-between bg-indigo-600 shadow-indigo-300 dark:shadow-indigo-800 shadow-2xl font-sans"><div class="p-2"><a class="text-2xl font-semibold text-neutral-100 dark:text-neutral-200" href="/"><h1 class="inline">üçî food for ai</h1> <span class="font-mono font-light text-xs">food.joona.cloud</span></a></div></nav><main class="mt-4"><div class="flex justify-center"><div class="md:px-10 min-w-0 max-w-7xl mb-12"><article><header class="px-5 mb-4 py-10 relative"><h1 class="text-3xl leading-none tracking-tight text-gray-900 md:text-4xl lg:text-5xl dark:text-gray-100">Deep dive to Azure Functions with Go</h1><time dateTime="2023-11-03 00:00" class="pl-1 font-serif text-slate-400 bottom-0 absolute"><svg class="h-4 w-4 inline-block" width="24" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 19l7-7 3 3-7 7-3-3z"></path> <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path> <path d="M2 2l7.586 7.586"></path> <circle cx="11" cy="11" r="2"></circle></svg> <!-- -->2023-11-03 00:00</time></header><div class="bg-slate-100 dark:bg-slate-800 p-5 pb-12 rounded shadow-lg"><p class="italic text-slate-400 p-4">The code discussed in this blog post is available on <a href="https://github.com/iotalambda/beenotif">GitHub</a>.</p><hr class="h-px my-4 bg-gray-200 border-0 dark:bg-gray-700"/><div class="space-y-4"><p>Azure Functions has supported <em>Custom Handlers</em> since 2020. With Custom Handlers any web server that is able to run on one the available Azure Functions platforms can function as a handler. So in this article we'll delve into the details of implementing a timer triggered Azure Function with Go ‚Äì Go not being a first-class citizen in the Azure Functions world (unlike C#, Java, JavaScript, TypeScript, Python and PowerShell).</p>
<p>My goal was to create a scheduled task that is able to scrape data from a web page periodically and send me a push notification if the data has changed. Ultimately I ended up creating a relatively generic solution for this purpose, available in the git repo.</p>
<h2 id="setting-up-the-project"><a href="#setting-up-the-project">Setting up the project</a></h2>
<p>Following the <a href="https://learn.microsoft.com/en-us/azure/azure-functions/create-first-function-vs-code-other?tabs=go%2Clinux">Microsoft tutorial</a>, we end up with an empty Azure Functions project and several open questions. We'd like to create a timer triggered function, so we can simply ditch the default HTTP triggered function and execute <code>func new -l Custom -t TimerTrigger -n timer</code>.</p>
<p>In the newly created <code>timer</code> directory we now have a <code>function.json</code> file:</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="json" data-theme="light"><code data-language="json" data-theme="light"><span class="line"><span style="color: #24292E">{</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #005CC5">"bindings"</span><span style="color: #24292E">: [</span></span>
<span class="line"><span style="color: #24292E">    {</span></span>
<span class="line"><span style="color: #24292E">      </span><span style="color: #005CC5">"name"</span><span style="color: #24292E">: </span><span style="color: #032F62">"myTimer"</span><span style="color: #24292E">,</span></span>
<span class="line"><span style="color: #24292E">      </span><span style="color: #005CC5">"type"</span><span style="color: #24292E">: </span><span style="color: #032F62">"timerTrigger"</span><span style="color: #24292E">,</span></span>
<span class="line"><span style="color: #24292E">      </span><span style="color: #005CC5">"direction"</span><span style="color: #24292E">: </span><span style="color: #032F62">"in"</span><span style="color: #24292E">,</span></span>
<span class="line"><span style="color: #24292E">      </span><span style="color: #005CC5">"schedule"</span><span style="color: #24292E">: </span><span style="color: #032F62">"0 */5 * * * *"</span></span>
<span class="line"><span style="color: #24292E">    }</span></span>
<span class="line"><span style="color: #24292E">  ]</span></span>
<span class="line"><span style="color: #24292E">}</span></span></code></pre><pre data-language="json" data-theme="dark"><code data-language="json" data-theme="dark"><span class="line"><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #79B8FF">"bindings"</span><span style="color: #E1E4E8">: [</span></span>
<span class="line"><span style="color: #E1E4E8">    {</span></span>
<span class="line"><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">"name"</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">"myTimer"</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">"type"</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">"timerTrigger"</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">"direction"</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">"in"</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">"schedule"</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">"0 */5 * * * *"</span></span>
<span class="line"><span style="color: #E1E4E8">    }</span></span>
<span class="line"><span style="color: #E1E4E8">  ]</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre></div>
<p>It's all quite clear. The <code>name</code> property seems a bit suspicious, but I suppose it's just a name for an individual schedule (could be e.g. "hourly"), and not something that affects the control flow that much.</p>
<p>Next the <code>host.json</code> file. Our Go web server implementation will be an executable, so the <code>customHandler</code> section should be configured as follows:</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="json" data-theme="light"><code data-language="json" data-theme="light"><span class="line"><span style="color: #24292E">{</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #005CC5">"version"</span><span style="color: #24292E">: </span><span style="color: #032F62">"2.0"</span><span style="color: #24292E">,</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #005CC5">"logging"</span><span style="color: #24292E">: {</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #005CC5">"applicationInsights"</span><span style="color: #24292E">: {</span></span>
<span class="line"><span style="color: #24292E">      </span><span style="color: #005CC5">"samplingSettings"</span><span style="color: #24292E">: {</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">"isEnabled"</span><span style="color: #24292E">: </span><span style="color: #005CC5">true</span><span style="color: #24292E">,</span></span>
<span class="line"><span style="color: #24292E">        </span><span style="color: #005CC5">"excludedTypes"</span><span style="color: #24292E">: </span><span style="color: #032F62">"Request"</span></span>
<span class="line"><span style="color: #24292E">      }</span></span>
<span class="line"><span style="color: #24292E">    }</span></span>
<span class="line"><span style="color: #24292E">  },</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #005CC5">"extensionBundle"</span><span style="color: #24292E">: {</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #005CC5">"id"</span><span style="color: #24292E">: </span><span style="color: #032F62">"Microsoft.Azure.Functions.ExtensionBundle"</span><span style="color: #24292E">,</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #005CC5">"version"</span><span style="color: #24292E">: </span><span style="color: #032F62">"[4.*, 5.0.0)"</span></span>
<span class="line"><span style="color: #24292E">  },</span></span>
<span class="line"><span style="color: #24292E">  </span><span style="color: #005CC5">"customHandler"</span><span style="color: #24292E">: {</span></span>
<span class="line"><span style="color: #24292E">    </span><span style="color: #005CC5">"description"</span><span style="color: #24292E">: {</span></span>
<span class="line"><span style="color: #24292E">      </span><span style="color: #005CC5">"defaultExecutablePath"</span><span style="color: #24292E">: </span><span style="color: #032F62">"build/beenotif"</span><span style="color: #24292E">,</span></span>
<span class="line"><span style="color: #24292E">      </span><span style="color: #005CC5">"workingDirectory"</span><span style="color: #24292E">: </span><span style="color: #032F62">""</span><span style="color: #24292E">,</span></span>
<span class="line"><span style="color: #24292E">      </span><span style="color: #005CC5">"arguments"</span><span style="color: #24292E">: []</span></span>
<span class="line"><span style="color: #24292E">    }</span></span>
<span class="line"><span style="color: #24292E">  }</span></span>
<span class="line"><span style="color: #24292E">}</span></span></code></pre><pre data-language="json" data-theme="dark"><code data-language="json" data-theme="dark"><span class="line"><span style="color: #E1E4E8">{</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #79B8FF">"version"</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">"2.0"</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #79B8FF">"logging"</span><span style="color: #E1E4E8">: {</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #79B8FF">"applicationInsights"</span><span style="color: #E1E4E8">: {</span></span>
<span class="line"><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">"samplingSettings"</span><span style="color: #E1E4E8">: {</span></span>
<span class="line"><span style="color: #E1E4E8">        </span><span style="color: #79B8FF">"isEnabled"</span><span style="color: #E1E4E8">: </span><span style="color: #79B8FF">true</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">        </span><span style="color: #79B8FF">"excludedTypes"</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">"Request"</span></span>
<span class="line"><span style="color: #E1E4E8">      }</span></span>
<span class="line"><span style="color: #E1E4E8">    }</span></span>
<span class="line"><span style="color: #E1E4E8">  },</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #79B8FF">"extensionBundle"</span><span style="color: #E1E4E8">: {</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #79B8FF">"id"</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">"Microsoft.Azure.Functions.ExtensionBundle"</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #79B8FF">"version"</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">"[4.*, 5.0.0)"</span></span>
<span class="line"><span style="color: #E1E4E8">  },</span></span>
<span class="line"><span style="color: #E1E4E8">  </span><span style="color: #79B8FF">"customHandler"</span><span style="color: #E1E4E8">: {</span></span>
<span class="line"><span style="color: #E1E4E8">    </span><span style="color: #79B8FF">"description"</span><span style="color: #E1E4E8">: {</span></span>
<span class="line"><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">"defaultExecutablePath"</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">"build/beenotif"</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">"workingDirectory"</span><span style="color: #E1E4E8">: </span><span style="color: #9ECBFF">""</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">      </span><span style="color: #79B8FF">"arguments"</span><span style="color: #E1E4E8">: []</span></span>
<span class="line"><span style="color: #E1E4E8">    }</span></span>
<span class="line"><span style="color: #E1E4E8">  }</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre></div>
<p>and therefore <code>build</code> should be added to <code>.gitignore</code>. Initially I used <code>bin/beenotif</code> as the <code>defaultExecutablePath</code>, but for some reason Azure Functions deployment did not want to upload the <code>bin</code> directory contents to the Function App at all, so there must be some undocumented logic which prevents that.</p>
<p>Finally, we need to initialize a Go module:</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="sh" data-theme="light"><code data-language="sh" data-theme="light"><span class="line"><span style="color: #6F42C1">go</span><span style="color: #24292E"> </span><span style="color: #032F62">mod</span><span style="color: #24292E"> </span><span style="color: #032F62">init</span><span style="color: #24292E"> </span><span style="color: #032F62">beenotif</span></span></code></pre><pre data-language="sh" data-theme="dark"><code data-language="sh" data-theme="dark"><span class="line"><span style="color: #B392F0">go</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">mod</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">init</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">beenotif</span></span></code></pre></div>
<p>with a temporarily empty <code>main.go</code>:</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="go" data-theme="light"><code data-language="go" data-theme="light"><span class="line"><span style="color: #D73A49">package</span><span style="color: #24292E"> </span><span style="color: #6F42C1">main</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D73A49">func</span><span style="color: #24292E"> </span><span style="color: #6F42C1">main</span><span style="color: #24292E">() {</span></span>
<span class="line"><span style="color: #24292E">}</span></span></code></pre><pre data-language="go" data-theme="dark"><code data-language="go" data-theme="dark"><span class="line"><span style="color: #F97583">package</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">main</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F97583">func</span><span style="color: #E1E4E8"> </span><span style="color: #B392F0">main</span><span style="color: #E1E4E8">() {</span></span>
<span class="line"><span style="color: #E1E4E8">}</span></span></code></pre></div>
<p>and our Function App is able to build and run locally:</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="sh" data-theme="light"><code data-language="sh" data-theme="light"><span class="line"><span style="color: #6F42C1">go</span><span style="color: #24292E"> </span><span style="color: #032F62">build</span><span style="color: #24292E"> </span><span style="color: #005CC5">-o</span><span style="color: #24292E"> </span><span style="color: #032F62">build/</span><span style="color: #24292E"> &#x26;&#x26; </span><span style="color: #6F42C1">func</span><span style="color: #24292E"> </span><span style="color: #032F62">start</span></span></code></pre><pre data-language="sh" data-theme="dark"><code data-language="sh" data-theme="dark"><span class="line"><span style="color: #B392F0">go</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">build</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">-o</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">build/</span><span style="color: #E1E4E8"> &#x26;&#x26; </span><span style="color: #B392F0">func</span><span style="color: #E1E4E8"> </span><span style="color: #9ECBFF">start</span></span></code></pre></div>
<h2 id="the-handler"><a href="#the-handler">The handler</a></h2>
<p>Microsoft's tutorial page offers an example on how to create an HTTP triggered function, but finding out how to create a timer triggered one took some trial and effort. Apparently, an HTTP handler with a pattern <code>/functionNameHere</code> will be the one invoked based on the CRON schedule - functionNameHere being the name used in the <code>func new</code> command. So in our case the correct pattern is <code>/timer</code>:</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="go" data-theme="light"><code data-language="go" data-theme="light"><span class="line"><span style="color: #24292E">http.</span><span style="color: #005CC5">HandleFunc</span><span style="color: #24292E">(</span><span style="color: #032F62">"/timer"</span><span style="color: #24292E">, </span><span style="color: #D73A49">func</span><span style="color: #24292E">(w http.ResponseWriter, r </span><span style="color: #D73A49">*</span><span style="color: #24292E">http.Request) {</span></span>
<span class="line"><span style="color: #24292E">		fmt.</span><span style="color: #005CC5">Print</span><span style="color: #24292E">(</span><span style="color: #032F62">"Hey!</span><span style="color: #005CC5">\n</span><span style="color: #032F62">"</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #24292E">		w.</span><span style="color: #005CC5">Header</span><span style="color: #24292E">().</span><span style="color: #005CC5">Set</span><span style="color: #24292E">(</span><span style="color: #032F62">"Content-Type"</span><span style="color: #24292E">, </span><span style="color: #032F62">"application/json"</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #24292E">		w.</span><span style="color: #005CC5">WriteHeader</span><span style="color: #24292E">(</span><span style="color: #005CC5">201</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #24292E">		_, err </span><span style="color: #D73A49">=</span><span style="color: #24292E"> w.</span><span style="color: #005CC5">Write</span><span style="color: #24292E">([]</span><span style="color: #005CC5">byte</span><span style="color: #24292E">(</span><span style="color: #032F62">"{}"</span><span style="color: #24292E">))</span></span>
<span class="line"><span style="color: #24292E">		</span><span style="color: #D73A49">if</span><span style="color: #24292E"> err </span><span style="color: #D73A49">!=</span><span style="color: #24292E"> </span><span style="color: #005CC5">nil</span><span style="color: #24292E"> {</span></span>
<span class="line"><span style="color: #24292E">			log.</span><span style="color: #005CC5">Fatal</span><span style="color: #24292E">(</span><span style="color: #032F62">"Could not write response."</span><span style="color: #24292E">)</span></span>
<span class="line"><span style="color: #24292E">		}</span></span>
<span class="line"><span style="color: #24292E">})</span></span></code></pre><pre data-language="go" data-theme="dark"><code data-language="go" data-theme="dark"><span class="line"><span style="color: #E1E4E8">http.</span><span style="color: #79B8FF">HandleFunc</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">"/timer"</span><span style="color: #E1E4E8">, </span><span style="color: #F97583">func</span><span style="color: #E1E4E8">(w http.ResponseWriter, r </span><span style="color: #F97583">*</span><span style="color: #E1E4E8">http.Request) {</span></span>
<span class="line"><span style="color: #E1E4E8">		fmt.</span><span style="color: #79B8FF">Print</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">"Hey!</span><span style="color: #79B8FF">\n</span><span style="color: #9ECBFF">"</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">		w.</span><span style="color: #79B8FF">Header</span><span style="color: #E1E4E8">().</span><span style="color: #79B8FF">Set</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">"Content-Type"</span><span style="color: #E1E4E8">, </span><span style="color: #9ECBFF">"application/json"</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">		w.</span><span style="color: #79B8FF">WriteHeader</span><span style="color: #E1E4E8">(</span><span style="color: #79B8FF">201</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">		_, err </span><span style="color: #F97583">=</span><span style="color: #E1E4E8"> w.</span><span style="color: #79B8FF">Write</span><span style="color: #E1E4E8">([]</span><span style="color: #79B8FF">byte</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">"{}"</span><span style="color: #E1E4E8">))</span></span>
<span class="line"><span style="color: #E1E4E8">		</span><span style="color: #F97583">if</span><span style="color: #E1E4E8"> err </span><span style="color: #F97583">!=</span><span style="color: #E1E4E8"> </span><span style="color: #79B8FF">nil</span><span style="color: #E1E4E8"> {</span></span>
<span class="line"><span style="color: #E1E4E8">			log.</span><span style="color: #79B8FF">Fatal</span><span style="color: #E1E4E8">(</span><span style="color: #9ECBFF">"Could not write response."</span><span style="color: #E1E4E8">)</span></span>
<span class="line"><span style="color: #E1E4E8">		}</span></span>
<span class="line"><span style="color: #E1E4E8">})</span></span></code></pre></div>
<p>Note that the handler must return something, or otherwise the function execution <a href="https://learn.microsoft.com/en-us/answers/questions/614450/custom-handler-function-not-marking-run-as-complet">will never be marked as completed</a>.</p>
<h2 id="scraping-with-chromedp"><a href="#scraping-with-chromedp">Scraping with <code>chromedp</code></a></h2>
<p><code>chromedp</code> offers a surprisingly effective toolkit for our web scraping needs. The page we need to do scraping on is an SPA, so a simple <code>GET</code> wouldn't do it, but instead we need to launch a headless browser in our service, download the SPA and let the SPA's JavaScript do its thing before scraping:</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="go" data-theme="light"><code data-language="go" data-theme="light"><span class="line"><span style="color: #24292E">err </span><span style="color: #D73A49">:=</span><span style="color: #24292E"> chromedp.</span><span style="color: #005CC5">Run</span><span style="color: #24292E">(dpctx,</span></span>
<span class="line"><span style="color: #24292E">	chromedp.</span><span style="color: #005CC5">Navigate</span><span style="color: #24292E">(config.TargetUrl),</span></span>
<span class="line"><span style="color: #24292E">	chromedp.</span><span style="color: #005CC5">Sleep</span><span style="color: #24292E">(time.</span><span style="color: #005CC5">Duration</span><span style="color: #24292E">(config.WaitSeconds)</span><span style="color: #D73A49">*</span><span style="color: #24292E">time.Second),</span></span>
<span class="line"><span style="color: #24292E">	chromedp.</span><span style="color: #005CC5">EvaluateAsDevTools</span><span style="color: #24292E">(config.StringArrayJs, </span><span style="color: #D73A49">&#x26;</span><span style="color: #24292E">items),</span></span>
<span class="line"><span style="color: #24292E">)</span></span></code></pre><pre data-language="go" data-theme="dark"><code data-language="go" data-theme="dark"><span class="line"><span style="color: #E1E4E8">err </span><span style="color: #F97583">:=</span><span style="color: #E1E4E8"> chromedp.</span><span style="color: #79B8FF">Run</span><span style="color: #E1E4E8">(dpctx,</span></span>
<span class="line"><span style="color: #E1E4E8">	chromedp.</span><span style="color: #79B8FF">Navigate</span><span style="color: #E1E4E8">(config.TargetUrl),</span></span>
<span class="line"><span style="color: #E1E4E8">	chromedp.</span><span style="color: #79B8FF">Sleep</span><span style="color: #E1E4E8">(time.</span><span style="color: #79B8FF">Duration</span><span style="color: #E1E4E8">(config.WaitSeconds)</span><span style="color: #F97583">*</span><span style="color: #E1E4E8">time.Second),</span></span>
<span class="line"><span style="color: #E1E4E8">	chromedp.</span><span style="color: #79B8FF">EvaluateAsDevTools</span><span style="color: #E1E4E8">(config.StringArrayJs, </span><span style="color: #F97583">&#x26;</span><span style="color: #E1E4E8">items),</span></span>
<span class="line"><span style="color: #E1E4E8">)</span></span></code></pre></div>
<p>With <code>EvaluateAsDevTools</code> we are able to run JavaScript and DOM queries exactly like in a full fledged Chrome.</p>
<p><code>chromedp</code> requires a <code>chrome</code> executable to function and apparently there <a href="https://learn.microsoft.com/en-us/answers/questions/1354174/cannot-find-chrome-binary-in-azure-function-app">has</a> <a href="https://anthonychu.ca/post/azure-functions-headless-chromium-puppeteer-playwright/">been</a> <a href="https://stackoverflow.com/questions/65609204/puppeteer-throws-launch-exception-when-deployed-on-azure-functions-node-on-linux">some</a> issues with it in the Consumption Plan. One of the ways to deal with this is naturally to have the Function App running in a container with all the necessary dependencies. But Consumption Plan does not support Docker, so I'd need to pay a non-zero amount of money for other tiers and that's unacceptable. But we can simply omit this issue by downloading prebuilt Chromium binaries and deploying them along the application.</p>
<p>In <a href="https://www.chromium.org/getting-involved/download-chromium/">chromium.org</a> there's a link to a <a href="https://github.com/scheib/chromium-latest-linux">repo</a> with a <a href="https://github.com/scheib/chromium-latest-linux/blob/master/update.sh">script</a> that downloads the latest binaries. That could be tweaked for our needs and our directory structure! The tweaked version is in <a href="https://github.com/iotalambda/beenotif/blob/main/publish.sh">publish.sh</a>. This script file is meant to be executed either manually before deploying from VSCode or automatically by pipelines.</p>
<p>The last thing to do is tell <code>chromedp</code> where the binary is. We can implement our own <code>ExecAllocator</code>:</p>
<div data-rehype-pretty-code-fragment=""><pre data-language="go" data-theme="light"><code data-language="go" data-theme="light"><span class="line"><span style="color: #24292E">allocatorCtx, _ </span><span style="color: #D73A49">:=</span><span style="color: #24292E"> chromedp.</span><span style="color: #005CC5">NewExecAllocator</span><span style="color: #24292E">(</span></span>
<span class="line"><span style="color: #24292E">	ctx,</span></span>
<span class="line"><span style="color: #24292E">	</span><span style="color: #005CC5">append</span><span style="color: #24292E">([]</span><span style="color: #D73A49">func</span><span style="color: #24292E">(allocator </span><span style="color: #D73A49">*</span><span style="color: #24292E">chromedp.ExecAllocator){</span></span>
<span class="line"><span style="color: #24292E">		chromedp.</span><span style="color: #005CC5">ExecPath</span><span style="color: #24292E">(sc.ChromiumPath),</span></span>
<span class="line"><span style="color: #24292E">	}, chromedp.DefaultExecAllocatorOptions[:]</span><span style="color: #D73A49">...</span><span style="color: #24292E">)</span><span style="color: #D73A49">...</span><span style="color: #24292E">,</span></span>
<span class="line"><span style="color: #24292E">)</span></span></code></pre><pre data-language="go" data-theme="dark"><code data-language="go" data-theme="dark"><span class="line"><span style="color: #E1E4E8">allocatorCtx, _ </span><span style="color: #F97583">:=</span><span style="color: #E1E4E8"> chromedp.</span><span style="color: #79B8FF">NewExecAllocator</span><span style="color: #E1E4E8">(</span></span>
<span class="line"><span style="color: #E1E4E8">	ctx,</span></span>
<span class="line"><span style="color: #E1E4E8">	</span><span style="color: #79B8FF">append</span><span style="color: #E1E4E8">([]</span><span style="color: #F97583">func</span><span style="color: #E1E4E8">(allocator </span><span style="color: #F97583">*</span><span style="color: #E1E4E8">chromedp.ExecAllocator){</span></span>
<span class="line"><span style="color: #E1E4E8">		chromedp.</span><span style="color: #79B8FF">ExecPath</span><span style="color: #E1E4E8">(sc.ChromiumPath),</span></span>
<span class="line"><span style="color: #E1E4E8">	}, chromedp.DefaultExecAllocatorOptions[:]</span><span style="color: #F97583">...</span><span style="color: #E1E4E8">)</span><span style="color: #F97583">...</span><span style="color: #E1E4E8">,</span></span>
<span class="line"><span style="color: #E1E4E8">)</span></span></code></pre></div>
<p>It devours a context and returns another one, which we must later provide to <code>chromedp.Run(...)</code>, so that the prebuilt Chromium binary is really used.</p>
<h2 id="bonus-a-brief-note-about-azure-tables"><a href="#bonus-a-brief-note-about-azure-tables"><strong>BONUS</strong>: A brief note about Azure Tables</a></h2>
<p>I needed a cheap lightweight storage to back my scraper and decided to go with <em>Azure Tables</em> as I had the Storage Account there anyway due to Azure Functions. I invested some time in testing different Go libraries for Azure Tables and there seems to be at least three options, some official, some unoffical, some no longer maintained. But as for right now, the way to go seems to be <a href="https://github.com/Azure/azure-sdk-for-go/tree/main/sdk/data/aztables">azure-sdk-for-go aztables</a>.</p></div></div></article></div></div></main><script src="/_next/static/chunks/webpack-cf90cbaabf0d0d8b.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/583a894d7b920fb7-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/media/e807dee2426166ad-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n3:HL[\"/_next/static/css/628175db981e71d1.css\",{\"as\":\"style\"}]\n0:\"$L4\"\n"])</script><script>self.__next_f.push([1,"5:HL[\"/_next/static/css/301e7291452e98cd.css\",{\"as\":\"style\"}]\n"])</script><script>self.__next_f.push([1,"6:I{\"id\":7948,\"chunks\":[\"272:static/chunks/webpack-cf90cbaabf0d0d8b.js\",\"971:static/chunks/fd9d1056-a99b58d3cc150217.js\",\"596:static/chunks/596-9d43875837bd0b65.js\"],\"name\":\"default\",\"async\":false}\n8:I{\"id\":6628,\"chunks\":[\"272:static/chunks/webpack-cf90cbaabf0d0d8b.js\",\"971:static/chunks/fd9d1056-a99b58d3cc150217.js\",\"596:static/chunks/596-9d43875837bd0b65.js\"],\"name\":\"\",\"async\":false}\n9:I{\"id\":6685,\"chunks\":[\"685:static/chunks/685-a8c11ad368fada34.js\",\"185:static/chunks/app/layout-2e1bbcbb1be95a7d.js\"],\"na"])</script><script>self.__next_f.push([1,"me\":\"\",\"async\":false}\na:I{\"id\":7767,\"chunks\":[\"272:static/chunks/webpack-cf90cbaabf0d0d8b.js\",\"971:static/chunks/fd9d1056-a99b58d3cc150217.js\",\"596:static/chunks/596-9d43875837bd0b65.js\"],\"name\":\"default\",\"async\":false}\nb:I{\"id\":7920,\"chunks\":[\"272:static/chunks/webpack-cf90cbaabf0d0d8b.js\",\"971:static/chunks/fd9d1056-a99b58d3cc150217.js\",\"596:static/chunks/596-9d43875837bd0b65.js\"],\"name\":\"default\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"4:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/628175db981e71d1.css\",\"precedence\":\"next\"}]],[\"$\",\"$L6\",null,{\"buildId\":\"jNmCYlUPh5XVfbfq-8iys\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/2023/11/03/Deep-dive-to-Azure-Functions-with-golang\",\"initialTree\":[\"\",{\"children\":[[\"id\",\"2023/11/03/Deep-dive-to-Azure-Functions-with-golang\",\"c\"],{\"children\":[\"__PAGE__?{\\\"id\\\":[\\\"2023\\\",\\\"11\\\",\\\"03\\\",\\\"Deep-dive-to-Azure-Functions-with-golang\\\"]}\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[false,\"$L7\"],\"globalErrorComponent\":\"$8\",\"children\":[null,[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"__variable_eb9fb7 __variable_2fad4c\",\"children\":[\"$\",\"body\",null,{\"className\":\"bg-slate-200 dark:bg-slate-700\",\"children\":[[\"$\",\"nav\",null,{\"className\":\"w-full flex flex-row justify-between bg-indigo-600 shadow-indigo-300 dark:shadow-indigo-800 shadow-2xl font-sans\",\"children\":[\"$\",\"div\",null,{\"className\":\"p-2\",\"children\":[\"$\",\"$L9\",null,{\"className\":\"text-2xl font-semibold text-neutral-100 dark:text-neutral-200\",\"href\":\"/\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"inline\",\"children\":\"üçî food for ai\"}],\" \",[\"$\",\"span\",null,{\"className\":\"font-mono font-light text-xs\",\"children\":\"food.joona.cloud\"}]]}]}]}],[\"$\",\"main\",null,{\"className\":\"mt-4\",\"children\":[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"childProp\":{\"current\":[\"$\",\"$La\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",[\"id\",\"2023/11/03/Deep-dive-to-Azure-Functions-with-golang\",\"c\"],\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$Lc\",\"$Ld\",null],\"segment\":\"__PAGE__?{\\\"id\\\":[\\\"2023\\\",\\\"11\\\",\\\"03\\\",\\\"Deep-dive-to-Azure-Functions-with-golang\\\"]}\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/301e7291452e98cd.css\",\"precedence\":\"next\"}]]}],\"segment\":[\"id\",\"2023/11/03/Deep-dive-to-Azure-Functions-with-golang\",\"c\"]},\"styles\":[]}]}]]}]}],null]}]]\n"])</script><script>self.__next_f.push([1,"e:T710a,"])</script><script>self.__next_f.push([1,"\u003cp\u003eAzure Functions has supported \u003cem\u003eCustom Handlers\u003c/em\u003e since 2020. With Custom Handlers any web server that is able to run on one the available Azure Functions platforms can function as a handler. So in this article we'll delve into the details of implementing a timer triggered Azure Function with Go ‚Äì Go not being a first-class citizen in the Azure Functions world (unlike C#, Java, JavaScript, TypeScript, Python and PowerShell).\u003c/p\u003e\n\u003cp\u003eMy goal was to create a scheduled task that is able to scrape data from a web page periodically and send me a push notification if the data has changed. Ultimately I ended up creating a relatively generic solution for this purpose, available in the git repo.\u003c/p\u003e\n\u003ch2 id=\"setting-up-the-project\"\u003e\u003ca href=\"#setting-up-the-project\"\u003eSetting up the project\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eFollowing the \u003ca href=\"https://learn.microsoft.com/en-us/azure/azure-functions/create-first-function-vs-code-other?tabs=go%2Clinux\"\u003eMicrosoft tutorial\u003c/a\u003e, we end up with an empty Azure Functions project and several open questions. We'd like to create a timer triggered function, so we can simply ditch the default HTTP triggered function and execute \u003ccode\u003efunc new -l Custom -t TimerTrigger -n timer\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eIn the newly created \u003ccode\u003etimer\u003c/code\u003e directory we now have a \u003ccode\u003efunction.json\u003c/code\u003e file:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre data-language=\"json\" data-theme=\"light\"\u003e\u003ccode data-language=\"json\" data-theme=\"light\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e\"bindings\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e: [\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e    {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e\"name\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"myTimer\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e\"type\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"timerTrigger\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e\"direction\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"in\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e\"schedule\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"0 */5 * * * *\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  ]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cpre data-language=\"json\" data-theme=\"dark\"\u003e\u003ccode data-language=\"json\" data-theme=\"dark\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e\"bindings\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e: [\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e    {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e\"name\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003e\"myTimer\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e\"type\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003e\"timerTrigger\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e\"direction\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003e\"in\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e\"schedule\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003e\"0 */5 * * * *\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e  ]\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eIt's all quite clear. The \u003ccode\u003ename\u003c/code\u003e property seems a bit suspicious, but I suppose it's just a name for an individual schedule (could be e.g. \"hourly\"), and not something that affects the control flow that much.\u003c/p\u003e\n\u003cp\u003eNext the \u003ccode\u003ehost.json\u003c/code\u003e file. Our Go web server implementation will be an executable, so the \u003ccode\u003ecustomHandler\u003c/code\u003e section should be configured as follows:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre data-language=\"json\" data-theme=\"light\"\u003e\u003ccode data-language=\"json\" data-theme=\"light\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e\"version\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"2.0\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e\"logging\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e\"applicationInsights\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e\"samplingSettings\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e\"isEnabled\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e\"excludedTypes\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"Request\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e\"extensionBundle\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e\"id\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"Microsoft.Azure.Functions.ExtensionBundle\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e\"version\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"[4.*, 5.0.0)\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e\"customHandler\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e\"description\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e\"defaultExecutablePath\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"build/beenotif\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e\"workingDirectory\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e\"arguments\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e: []\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cpre data-language=\"json\" data-theme=\"dark\"\u003e\u003ccode data-language=\"json\" data-theme=\"dark\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e\"version\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003e\"2.0\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e\"logging\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e\"applicationInsights\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e\"samplingSettings\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e\"isEnabled\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e        \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e\"excludedTypes\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003e\"Request\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e\"extensionBundle\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e\"id\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003e\"Microsoft.Azure.Functions.ExtensionBundle\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e\"version\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003e\"[4.*, 5.0.0)\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e  },\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e  \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e\"customHandler\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e    \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e\"description\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e: {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e\"defaultExecutablePath\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003e\"build/beenotif\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e\"workingDirectory\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e: \u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003e\"\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e      \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e\"arguments\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e: []\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eand therefore \u003ccode\u003ebuild\u003c/code\u003e should be added to \u003ccode\u003e.gitignore\u003c/code\u003e. Initially I used \u003ccode\u003ebin/beenotif\u003c/code\u003e as the \u003ccode\u003edefaultExecutablePath\u003c/code\u003e, but for some reason Azure Functions deployment did not want to upload the \u003ccode\u003ebin\u003c/code\u003e directory contents to the Function App at all, so there must be some undocumented logic which prevents that.\u003c/p\u003e\n\u003cp\u003eFinally, we need to initialize a Go module:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre data-language=\"sh\" data-theme=\"light\"\u003e\u003ccode data-language=\"sh\" data-theme=\"light\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6F42C1\"\u003ego\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003emod\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003einit\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003ebeenotif\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cpre data-language=\"sh\" data-theme=\"dark\"\u003e\u003ccode data-language=\"sh\" data-theme=\"dark\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #B392F0\"\u003ego\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e \u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003emod\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e \u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003einit\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e \u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003ebeenotif\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003ewith a temporarily empty \u003ccode\u003emain.go\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre data-language=\"go\" data-theme=\"light\"\u003e\u003ccode data-language=\"go\" data-theme=\"light\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D73A49\"\u003epackage\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003emain\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #D73A49\"\u003efunc\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003emain\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cpre data-language=\"go\" data-theme=\"dark\"\u003e\u003ccode data-language=\"go\" data-theme=\"dark\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #F97583\"\u003epackage\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e \u003c/span\u003e\u003cspan style=\"color: #B392F0\"\u003emain\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #F97583\"\u003efunc\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e \u003c/span\u003e\u003cspan style=\"color: #B392F0\"\u003emain\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e() {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eand our Function App is able to build and run locally:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre data-language=\"sh\" data-theme=\"light\"\u003e\u003ccode data-language=\"sh\" data-theme=\"light\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #6F42C1\"\u003ego\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003ebuild\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e-o\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003ebuild/\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u0026#x26;\u0026#x26; \u003c/span\u003e\u003cspan style=\"color: #6F42C1\"\u003efunc\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003estart\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cpre data-language=\"sh\" data-theme=\"dark\"\u003e\u003ccode data-language=\"sh\" data-theme=\"dark\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #B392F0\"\u003ego\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e \u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003ebuild\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e-o\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e \u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003ebuild/\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e \u0026#x26;\u0026#x26; \u003c/span\u003e\u003cspan style=\"color: #B392F0\"\u003efunc\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e \u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003estart\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 id=\"the-handler\"\u003e\u003ca href=\"#the-handler\"\u003eThe handler\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eMicrosoft's tutorial page offers an example on how to create an HTTP triggered function, but finding out how to create a timer triggered one took some trial and effort. Apparently, an HTTP handler with a pattern \u003ccode\u003e/functionNameHere\u003c/code\u003e will be the one invoked based on the CRON schedule - functionNameHere being the name used in the \u003ccode\u003efunc new\u003c/code\u003e command. So in our case the correct pattern is \u003ccode\u003e/timer\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre data-language=\"go\" data-theme=\"light\"\u003e\u003ccode data-language=\"go\" data-theme=\"light\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003ehttp.\u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003eHandleFunc\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"/timer\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003efunc\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(w http.ResponseWriter, r \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e*\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003ehttp.Request) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e\t\tfmt.\u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003ePrint\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"Hey!\u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e\\n\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e\t\tw.\u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003eHeader\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e().\u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003eSet\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"Content-Type\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"application/json\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e\t\tw.\u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003eWriteHeader\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003e201\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e\t\t_, err \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e w.\u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003eWrite\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e([]\u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003ebyte\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"{}\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e\t\t\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003eif\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e err \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e!=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e \u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003enil\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e\t\t\tlog.\u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003eFatal\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #032F62\"\u003e\"Could not write response.\"\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e\t\t}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e})\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cpre data-language=\"go\" data-theme=\"dark\"\u003e\u003ccode data-language=\"go\" data-theme=\"dark\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003ehttp.\u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003eHandleFunc\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003e\"/timer\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #F97583\"\u003efunc\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e(w http.ResponseWriter, r \u003c/span\u003e\u003cspan style=\"color: #F97583\"\u003e*\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003ehttp.Request) {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e\t\tfmt.\u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003ePrint\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003e\"Hey!\u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e\\n\u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003e\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e\t\tw.\u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003eHeader\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e().\u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003eSet\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003e\"Content-Type\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e, \u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003e\"application/json\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e\t\tw.\u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003eWriteHeader\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003e201\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e\t\t_, err \u003c/span\u003e\u003cspan style=\"color: #F97583\"\u003e=\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e w.\u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003eWrite\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e([]\u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003ebyte\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003e\"{}\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e\t\t\u003c/span\u003e\u003cspan style=\"color: #F97583\"\u003eif\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e err \u003c/span\u003e\u003cspan style=\"color: #F97583\"\u003e!=\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e \u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003enil\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e\t\t\tlog.\u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003eFatal\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e(\u003c/span\u003e\u003cspan style=\"color: #9ECBFF\"\u003e\"Could not write response.\"\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e\t\t}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e})\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eNote that the handler must return something, or otherwise the function execution \u003ca href=\"https://learn.microsoft.com/en-us/answers/questions/614450/custom-handler-function-not-marking-run-as-complet\"\u003ewill never be marked as completed\u003c/a\u003e.\u003c/p\u003e\n\u003ch2 id=\"scraping-with-chromedp\"\u003e\u003ca href=\"#scraping-with-chromedp\"\u003eScraping with \u003ccode\u003echromedp\u003c/code\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003echromedp\u003c/code\u003e offers a surprisingly effective toolkit for our web scraping needs. The page we need to do scraping on is an SPA, so a simple \u003ccode\u003eGET\u003c/code\u003e wouldn't do it, but instead we need to launch a headless browser in our service, download the SPA and let the SPA's JavaScript do its thing before scraping:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre data-language=\"go\" data-theme=\"light\"\u003e\u003ccode data-language=\"go\" data-theme=\"light\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003eerr \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e:=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e chromedp.\u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003eRun\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(dpctx,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e\tchromedp.\u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003eNavigate\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(config.TargetUrl),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e\tchromedp.\u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003eSleep\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(time.\u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003eDuration\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(config.WaitSeconds)\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e*\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003etime.Second),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e\tchromedp.\u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003eEvaluateAsDevTools\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(config.StringArrayJs, \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003eitems),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cpre data-language=\"go\" data-theme=\"dark\"\u003e\u003ccode data-language=\"go\" data-theme=\"dark\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003eerr \u003c/span\u003e\u003cspan style=\"color: #F97583\"\u003e:=\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e chromedp.\u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003eRun\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e(dpctx,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e\tchromedp.\u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003eNavigate\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e(config.TargetUrl),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e\tchromedp.\u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003eSleep\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e(time.\u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003eDuration\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e(config.WaitSeconds)\u003c/span\u003e\u003cspan style=\"color: #F97583\"\u003e*\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003etime.Second),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e\tchromedp.\u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003eEvaluateAsDevTools\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e(config.StringArrayJs, \u003c/span\u003e\u003cspan style=\"color: #F97583\"\u003e\u0026#x26;\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003eitems),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eWith \u003ccode\u003eEvaluateAsDevTools\u003c/code\u003e we are able to run JavaScript and DOM queries exactly like in a full fledged Chrome.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003echromedp\u003c/code\u003e requires a \u003ccode\u003echrome\u003c/code\u003e executable to function and apparently there \u003ca href=\"https://learn.microsoft.com/en-us/answers/questions/1354174/cannot-find-chrome-binary-in-azure-function-app\"\u003ehas\u003c/a\u003e \u003ca href=\"https://anthonychu.ca/post/azure-functions-headless-chromium-puppeteer-playwright/\"\u003ebeen\u003c/a\u003e \u003ca href=\"https://stackoverflow.com/questions/65609204/puppeteer-throws-launch-exception-when-deployed-on-azure-functions-node-on-linux\"\u003esome\u003c/a\u003e issues with it in the Consumption Plan. One of the ways to deal with this is naturally to have the Function App running in a container with all the necessary dependencies. But Consumption Plan does not support Docker, so I'd need to pay a non-zero amount of money for other tiers and that's unacceptable. But we can simply omit this issue by downloading prebuilt Chromium binaries and deploying them along the application.\u003c/p\u003e\n\u003cp\u003eIn \u003ca href=\"https://www.chromium.org/getting-involved/download-chromium/\"\u003echromium.org\u003c/a\u003e there's a link to a \u003ca href=\"https://github.com/scheib/chromium-latest-linux\"\u003erepo\u003c/a\u003e with a \u003ca href=\"https://github.com/scheib/chromium-latest-linux/blob/master/update.sh\"\u003escript\u003c/a\u003e that downloads the latest binaries. That could be tweaked for our needs and our directory structure! The tweaked version is in \u003ca href=\"https://github.com/iotalambda/beenotif/blob/main/publish.sh\"\u003epublish.sh\u003c/a\u003e. This script file is meant to be executed either manually before deploying from VSCode or automatically by pipelines.\u003c/p\u003e\n\u003cp\u003eThe last thing to do is tell \u003ccode\u003echromedp\u003c/code\u003e where the binary is. We can implement our own \u003ccode\u003eExecAllocator\u003c/code\u003e:\u003c/p\u003e\n\u003cdiv data-rehype-pretty-code-fragment=\"\"\u003e\u003cpre data-language=\"go\" data-theme=\"light\"\u003e\u003ccode data-language=\"go\" data-theme=\"light\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003eallocatorCtx, _ \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e:=\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e chromedp.\u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003eNewExecAllocator\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e\tctx,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e\t\u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003eappend\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e([]\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003efunc\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(allocator \u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e*\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003echromedp.ExecAllocator){\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e\t\tchromedp.\u003c/span\u003e\u003cspan style=\"color: #005CC5\"\u003eExecPath\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e(sc.ChromiumPath),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e\t}, chromedp.DefaultExecAllocatorOptions[:]\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e...\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #D73A49\"\u003e...\u003c/span\u003e\u003cspan style=\"color: #24292E\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #24292E\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003cpre data-language=\"go\" data-theme=\"dark\"\u003e\u003ccode data-language=\"go\" data-theme=\"dark\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003eallocatorCtx, _ \u003c/span\u003e\u003cspan style=\"color: #F97583\"\u003e:=\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e chromedp.\u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003eNewExecAllocator\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e\tctx,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e\t\u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003eappend\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e([]\u003c/span\u003e\u003cspan style=\"color: #F97583\"\u003efunc\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e(allocator \u003c/span\u003e\u003cspan style=\"color: #F97583\"\u003e*\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003echromedp.ExecAllocator){\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e\t\tchromedp.\u003c/span\u003e\u003cspan style=\"color: #79B8FF\"\u003eExecPath\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e(sc.ChromiumPath),\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e\t}, chromedp.DefaultExecAllocatorOptions[:]\u003c/span\u003e\u003cspan style=\"color: #F97583\"\u003e...\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e)\u003c/span\u003e\u003cspan style=\"color: #F97583\"\u003e...\u003c/span\u003e\u003cspan style=\"color: #E1E4E8\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color: #E1E4E8\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp\u003eIt devours a context and returns another one, which we must later provide to \u003ccode\u003echromedp.Run(...)\u003c/code\u003e, so that the prebuilt Chromium binary is really used.\u003c/p\u003e\n\u003ch2 id=\"bonus-a-brief-note-about-azure-tables\"\u003e\u003ca href=\"#bonus-a-brief-note-about-azure-tables\"\u003e\u003cstrong\u003eBONUS\u003c/strong\u003e: A brief note about Azure Tables\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eI needed a cheap lightweight storage to back my scraper and decided to go with \u003cem\u003eAzure Tables\u003c/em\u003e as I had the Storage Account there anyway due to Azure Functions. I invested some time in testing different Go libraries for Azure Tables and there seems to be at least three options, some official, some unoffical, some no longer maintained. But as for right now, the way to go seems to be \u003ca href=\"https://github.com/Azure/azure-sdk-for-go/tree/main/sdk/data/aztables\"\u003eazure-sdk-for-go aztables\u003c/a\u003e.\u003c/p\u003e"])</script><script>self.__next_f.push([1,"d:[\"$\",\"div\",null,{\"className\":\"flex justify-center\",\"children\":[\"$\",\"div\",null,{\"className\":\"md:px-10 min-w-0 max-w-7xl mb-12\",\"children\":[\"$\",\"article\",null,{\"children\":[[\"$\",\"header\",null,{\"className\":\"px-5 mb-4 py-10 relative\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-3xl leading-none tracking-tight text-gray-900 md:text-4xl lg:text-5xl dark:text-gray-100\",\"children\":\"Deep dive to Azure Functions with Go\"}],[\"$\",\"time\",null,{\"dateTime\":\"2023-11-03 00:00\",\"className\":\"pl-1 font-serif text-slate-400 bottom-0 absolute\",\"children\":[[\"$\",\"svg\",null,{\"className\":\"h-4 w-4 inline-block\",\"width\":\"24\",\"height\":\"24\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"strokeWidth\":\"2\",\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"children\":[[\"$\",\"path\",null,{\"d\":\"M12 19l7-7 3 3-7 7-3-3z\"}],\" \",[\"$\",\"path\",null,{\"d\":\"M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z\"}],\" \",[\"$\",\"path\",null,{\"d\":\"M2 2l7.586 7.586\"}],\" \",[\"$\",\"circle\",null,{\"cx\":\"11\",\"cy\":\"11\",\"r\":\"2\"}]]}],\" \",\"2023-11-03 00:00\"]}]]}],[\"$\",\"div\",null,{\"className\":\"bg-slate-100 dark:bg-slate-800 p-5 pb-12 rounded shadow-lg\",\"children\":[[[\"$\",\"p\",null,{\"className\":\"italic text-slate-400 p-4\",\"dangerouslySetInnerHTML\":{\"__html\":\"The code discussed in this blog post is available on \u003ca href=\\\"https://github.com/iotalambda/beenotif\\\"\u003eGitHub\u003c/a\u003e.\"}}],[\"$\",\"hr\",null,{\"className\":\"h-px my-4 bg-gray-200 border-0 dark:bg-gray-700\"}]],[\"$\",\"div\",null,{\"className\":\"space-y-4\",\"dangerouslySetInnerHTML\":{\"__html\":\"$e\"}}]]}]]}]}]}]\n"])</script><script>self.__next_f.push([1,"7:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Deep dive to Azure Functions with Go | Food for AI blog\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"Blog about .NET, Azure, React and whatever comes to mind.\"}],[\"$\",\"meta\",\"3\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}],[\"$\",\"meta\",\"5\",{\"name\":\"next-size-adjust\"}]]\nc:null\n"])</script></body></html>